(function() {
  const translations = {
    contact: {
      es: {
        pageTitle: "Contacto | DJ UWU Nightcore Machine",
        metaDescription: "Contacta con DJ UWU para preguntas, sugerencias o colaboraciones.",
        canonical: "https://djuwu.club/contact.html",
        toggleLabel: "Cambiar idioma",
        toggleText: "EN",
        text: {
          contactHeading: "Contacto (◕‿◕)♡",
          contactIntro: "¿Tienes preguntas, sugerencias o quieres colaborar? ¡Me encantaría saber de ti! Puedes contactarme a través de cualquiera de estos canales:",
          twitterTitle: "Twitter",
          twitterDescription: "DMs abiertos para colaboraciones",
          instagramTitle: "Instagram",
          instagramDescription: "Comparte tus nightcores aquí",
          emailTitle: "Email",
          emailDescription: "Respondo rápido",
          faqHeading: "Preguntas Frecuentes",
          faqCommercialTitle: "¿Puedo usar los archivos descargados comercialmente?",
          faqCommercialText: "No. Según nuestra licencia CC BY-NC 4.0, los archivos descargados son solo para uso no comercial.",
          faqUploadTitle: "¿Cuál es el archivo máximo que puedo subir?",
          faqUploadText: "Puedes subir archivos de audio hasta 500MB. Los archivos se procesan completamente en tu navegador.",
          faqServersTitle: "¿Se guardan mis archivos en los servidores?",
          faqServersText: "No. Todo el procesamiento se realiza en tu navegador. Tus archivos nunca se envían a nuestros servidores.",
          faqFeatureTitle: "¿Puedes agregar [característica]?",
          faqFeatureText: "¡Claro! Abre un issue en GitHub o contáctame por Twitter/Instagram con tus sugerencias.",
          footerText: "© 2025 DJ UWU"
        },
        links: {
          footerPrivacy: "Política de Privacidad",
          footerTerms: "Términos de Uso",
          footerContact: "Contacto"
        }
      },
      en: {
        pageTitle: "Contact | DJ UWU Nightcore Machine",
        metaDescription: "Reach out to DJ UWU for questions, suggestions, or collaborations.",
        canonical: "https://djuwu.club/en/contact.html",
        toggleLabel: "Change language",
        toggleText: "ES",
        text: {
          contactHeading: "Contact (◕‿◕)♡",
          contactIntro: "Have questions, suggestions, or want to collaborate? I'd love to hear from you! You can reach me through any of these channels:",
          twitterTitle: "Twitter",
          twitterDescription: "DMs open for collabs",
          instagramTitle: "Instagram",
          instagramDescription: "Share your nightcores here",
          emailTitle: "Email",
          emailDescription: "I reply quickly",
          faqHeading: "Frequently Asked Questions",
          faqCommercialTitle: "Can I use the downloaded files commercially?",
          faqCommercialText: "No. Under our CC BY-NC 4.0 license, downloaded files are for non-commercial use only.",
          faqUploadTitle: "What is the maximum file size I can upload?",
          faqUploadText: "You can upload audio files up to 500MB. Processing happens entirely in your browser.",
          faqServersTitle: "Are my files stored on the servers?",
          faqServersText: "No. All processing happens in your browser. Your files are never sent to our servers.",
          faqFeatureTitle: "Can you add [feature]?",
          faqFeatureText: "Absolutely! Open an issue on GitHub or contact me via Twitter/Instagram with your suggestions.",
          footerText: "© 2025 DJ UWU"
        },
        links: {
          footerPrivacy: "Privacy Policy",
          footerTerms: "Terms of Use",
          footerContact: "Contact"
        }
      }
    },
    terms: {
      es: {
        pageTitle: "Términos de Uso | DJ UWU Nightcore Machine",
        metaDescription: "Términos de uso de DJ UWU Nightcore Machine. Acepta nuestros términos para usar la herramienta.",
        canonical: "https://djuwu.club/terms.html",
        toggleLabel: "Cambiar idioma",
        toggleText: "EN",
        text: {
          termsHeading: "Términos de Uso",
          termsUpdated: "Última actualización: 21 de noviembre de 2025",
          acceptanceTitle: "1. Aceptación de los Términos",
          acceptanceText: "Al acceder y usar DJ UWU Nightcore Machine (\"el Servicio\"), aceptas estar sujeto a estos Términos de Uso. Si no estás de acuerdo con alguna parte de estos términos, no uses el Servicio.",
          descriptionTitle: "2. Descripción del Servicio",
          descriptionText: "DJ UWU Nightcore Machine es una herramienta web gratuita que permite a los usuarios ajustar la velocidad y tono de archivos de audio localmente en su navegador.",
          usageTitle: "3. Uso del Servicio",
          localProcessingTitle: "3.1 Procesamiento Local",
          localProcessingText: "Todo el procesamiento de audio se realiza <strong>localmente en tu navegador</strong>. Ningún archivo se sube a nuestros servidores.",
          permittedUseTitle: "3.2 Uso Permitido",
          permittedUseText: "Puedes usar este servicio para uso personal, educativo y creativo, siempre que respetes los derechos de copyright.",
          copyrightTitle: "4. Derechos de Autor",
          copyrightText: "⚠️ IMPORTANTE: Eres el único responsable de asegurarte de tener los derechos necesarios para modificar y usar cualquier audio que proceses.",
          liabilityTitle: "5. Limitación de Responsabilidad",
          liabilityText: "El Servicio se proporciona \"tal como está\" sin garantías de ningún tipo. No seremos responsables por pérdida de datos, infracciones de derechos de autor o daños directos/indirectos.",
          freeServiceTitle: "6. Servicio Gratuito",
          freeServiceText: "Este servicio es <strong>100% gratuito</strong>. Las donaciones a través de Ko-fi son completamente voluntarias y opcionales.",
          privacyTitle: "7. Privacidad",
          privacyText: "Lee nuestra <a id=\"privacyInline\" href=\"privacy.html\" style=\"color:#7b5cff;text-decoration:none;font-weight:600;\">Política de Privacidad</a> para entender cómo manejamos tu información.",
          modificationsTitle: "8. Modificaciones",
          modificationsText: "Nos reservamos el derecho de modificar o discontinuar el servicio en cualquier momento y cambiar estos términos con previo aviso.",
          lawTitle: "9. Ley Aplicable",
          lawText: "Estos términos se rigen por la ley española. Cualquier disputa se resolverá según la jurisdicción pertinente.",
          contactTitle: "10. Contacto",
          contactText: "Si tienes preguntas sobre estos términos, contacta: <strong>deejayuwu@gmail.com</strong>",
          backHome: "← Volver al inicio",
          footerText: "© 2025 DJ UWU"
        },
        links: {
          privacyLink: "Política de Privacidad",
          termsLink: "Términos de Uso",
          contactLink: "Contacto",
          privacyInline: "Política de Privacidad"
        }
      },
      en: {
        pageTitle: "Terms of Use | DJ UWU Nightcore Machine",
        metaDescription: "Terms of use for DJ UWU Nightcore Machine. Accept our terms to use the tool.",
        canonical: "https://djuwu.club/en/terms.html",
        toggleLabel: "Change language",
        toggleText: "ES",
        text: {
          termsHeading: "Terms of Use",
          termsUpdated: "Last updated: November 21, 2025",
          acceptanceTitle: "1. Acceptance of Terms",
          acceptanceText: "By accessing and using DJ UWU Nightcore Machine (\"the Service\"), you agree to be bound by these Terms of Use. If you disagree with any part, please do not use the Service.",
          descriptionTitle: "2. Service Description",
          descriptionText: "DJ UWU Nightcore Machine is a free web tool that lets users adjust the speed and pitch of audio files locally in their browser.",
          usageTitle: "3. Use of the Service",
          localProcessingTitle: "3.1 Local Processing",
          localProcessingText: "All audio processing happens <strong>locally in your browser</strong>. No files are uploaded to our servers.",
          permittedUseTitle: "3.2 Permitted Use",
          permittedUseText: "You may use this service for personal, educational, and creative purposes, as long as you respect copyright laws.",
          copyrightTitle: "4. Copyright",
          copyrightText: "⚠️ IMPORTANT: You are solely responsible for ensuring you have the necessary rights to modify and use any audio you process.",
          liabilityTitle: "5. Limitation of Liability",
          liabilityText: "The Service is provided \"as is\" without warranties of any kind. We are not liable for data loss, copyright infringements, or direct/indirect damages.",
          freeServiceTitle: "6. Free Service",
          freeServiceText: "This service is <strong>100% free</strong>. Donations via Ko-fi are completely voluntary and optional.",
          privacyTitle: "7. Privacy",
          privacyText: "Read our <a id=\"privacyInline\" href=\"privacy.html\" style=\"color:#7b5cff;text-decoration:none;font-weight:600;\">Privacy Policy</a> to understand how we handle your information.",
          modificationsTitle: "8. Modifications",
          modificationsText: "We reserve the right to modify or discontinue the service at any time and to change these terms with prior notice.",
          lawTitle: "9. Governing Law",
          lawText: "These terms are governed by Spanish law. Any disputes will be resolved under the applicable jurisdiction.",
          contactTitle: "10. Contact",
          contactText: "If you have questions about these terms, contact: <strong>deejayuwu@gmail.com</strong>",
          backHome: "← Back to home",
          footerText: "© 2025 DJ UWU"
        },
        links: {
          privacyLink: "Privacy Policy",
          termsLink: "Terms of Use",
          contactLink: "Contact",
          privacyInline: "Privacy Policy"
        }
      }
    },
    privacy: {
      es: {
        pageTitle: "Política de Privacidad | DJ UWU Nightcore Machine",
        metaDescription: "Política de privacidad de DJ UWU Nightcore Machine. Aprende cómo protegemos tus datos.",
        canonical: "https://djuwu.club/privacy.html",
        toggleLabel: "Cambiar idioma",
        toggleText: "EN",
        text: {
          privacyHeading: "Política de Privacidad",
          privacyUpdated: "Última actualización: 21 de noviembre de 2025",
          introTitle: "1. Introducción",
          introText: "En DJ UWU Nightcore Machine (\"nosotros\" o \"el sitio\"), respetamos tu privacidad. Esta Política de Privacidad explica cómo recopilamos, usamos y protegemos tus datos personales.",
          localProcessingTitle: "2. Procesamiento Local",
          localProcessingText: "<strong>El procesamiento de audio ocurre 100% en tu dispositivo.</strong> No enviamos archivos de audio a nuestros servidores. Todo ocurre localmente en tu navegador usando la Web Audio API.",
          dataCollectTitle: "3. Datos que Recopilamos",
          cfAnalytics: "Cloudflare Analytics: Información anónima sobre visitantes (país, navegador, dispositivo).",
          gaAnalytics: "Google Analytics (opcional): Si aceptas, recopilamos datos sobre cómo usas el sitio (páginas visitadas, tiempo en sitio, etc.). NO se incluye tu ubicación exacta ni información personal identificable.",
          cookiesItem: "Cookies: Solo cookies esenciales para el funcionamiento del sitio. Google Analytics usa cookies si está habilitado.",
          useTitle: "4. Cómo Usamos tus Datos",
          useItem1: "Mejorar la experiencia del usuario y el rendimiento del sitio.",
          useItem2: "Entender qué características son más populares.",
          useItem3: "Detectar y prevenir problemas técnicos.",
          thirdPartiesTitle: "5. Terceros y Compartición de Datos",
          thirdPartiesText: "No vendemos tus datos. Los datos se comparten únicamente con:",
          thirdPartyCf: "Cloudflare: Nuestro proveedor CDN (obligatorio para el sitio).",
          thirdPartyGa: "Google Analytics: Solo si lo aceptas explícitamente.",
          rightsTitle: "6. Derechos de Usuario",
          rightsIntro: "Tienes derecho a:",
          rightsAccess: "Acceder a tus datos personales.",
          rightsDelete: "Solicitar la eliminación de tus datos.",
          rightsObject: "Oponerte al procesamiento de datos.",
          rightsCookies: "Cambiar tus preferencias de cookies en cualquier momento.",
          rightsContact: "Para ejercer estos derechos, contacta: <strong>deejayuwu@gmail.com</strong>",
          securityTitle: "7. Seguridad",
          securityText: "Protegemos tu información mediante conexiones HTTPS encriptadas. Sin embargo, ningún sitio es 100% seguro. Si descubres una vulnerabilidad, contacta: <strong>deejayuwu@gmail.com</strong>",
          changesTitle: "8. Cambios en esta Política",
          changesText: "Podemos actualizar esta política ocasionalmente. Las actualizaciones entrarán en vigor cuando se publiquen en el sitio. Te recomendamos revisar esta política periódicamente.",
          contactTitle: "9. Contacto",
          contactText: "Si tienes preguntas sobre esta Política de Privacidad, contacta:\n<strong>Email:</strong> deejayuwu@gmail.com",
          backHome: "← Volver al inicio",
          footerText: "© 2025 DJ UWU"
        },
        links: {
          privacyLink: "Política de Privacidad",
          termsLink: "Términos de Uso",
          contactLink: "Contacto"
        }
      },
      en: {
        pageTitle: "Privacy Policy | DJ UWU Nightcore Machine",
        metaDescription: "Privacy policy for DJ UWU Nightcore Machine. Learn how we protect your data.",
        canonical: "https://djuwu.club/en/privacy.html",
        toggleLabel: "Change language",
        toggleText: "ES",
        text: {
          privacyHeading: "Privacy Policy",
          privacyUpdated: "Last updated: November 21, 2025",
          introTitle: "1. Introduction",
          introText: "At DJ UWU Nightcore Machine (\"we\" or \"the site\"), we respect your privacy. This Privacy Policy explains how we collect, use, and protect your personal data.",
          localProcessingTitle: "2. Local Processing",
          localProcessingText: "<strong>Audio processing happens 100% on your device.</strong> We do not send audio files to our servers. Everything runs locally in your browser using the Web Audio API.",
          dataCollectTitle: "3. Data We Collect",
          cfAnalytics: "Cloudflare Analytics: Anonymous information about visitors (country, browser, device).",
          gaAnalytics: "Google Analytics (optional): If you consent, we collect data on how you use the site (pages visited, time on site, etc.). No exact location or personally identifiable information is included.",
          cookiesItem: "Cookies: Only essential cookies for site functionality. Google Analytics uses cookies if enabled.",
          useTitle: "4. How We Use Your Data",
          useItem1: "Improve user experience and site performance.",
          useItem2: "Understand which features are most popular.",
          useItem3: "Detect and prevent technical issues.",
          thirdPartiesTitle: "5. Third Parties and Data Sharing",
          thirdPartiesText: "We do not sell your data. Data is shared only with:",
          thirdPartyCf: "Cloudflare: Our CDN provider (required for the site).",
          thirdPartyGa: "Google Analytics: Only if you explicitly agree.",
          rightsTitle: "6. User Rights",
          rightsIntro: "You have the right to:",
          rightsAccess: "Access your personal data.",
          rightsDelete: "Request deletion of your data.",
          rightsObject: "Object to data processing.",
          rightsCookies: "Change your cookie preferences at any time.",
          rightsContact: "To exercise these rights, contact: <strong>deejayuwu@gmail.com</strong>",
          securityTitle: "7. Security",
          securityText: "We protect your information with encrypted HTTPS connections. However, no site is 100% secure. If you discover a vulnerability, contact: <strong>deejayuwu@gmail.com</strong>",
          changesTitle: "8. Changes to This Policy",
          changesText: "We may update this policy occasionally. Updates take effect when published on the site. We recommend reviewing this policy periodically.",
          contactTitle: "9. Contact",
          contactText: "If you have questions about this Privacy Policy, contact:\n<strong>Email:</strong> deejayuwu@gmail.com",
          backHome: "← Back to home",
          footerText: "© 2025 DJ UWU"
        },
        links: {
          privacyLink: "Privacy Policy",
          termsLink: "Terms of Use",
          contactLink: "Contact"
        }
      }
    }
  };

  function detectLanguage() {
    const saved = localStorage.getItem('preferredLanguage');
    if (saved === 'es' || saved === 'en') return saved;
    const browserLang = navigator.language || navigator.userLanguage;
    if (browserLang && browserLang.startsWith('en')) return 'en';
    return 'es';
  }

  function updateMeta(page, lang) {
    const pageData = translations[page]?.[lang];
    if (!pageData) return;

    document.documentElement.lang = lang;
    if (pageData.pageTitle) document.title = pageData.pageTitle;

    const metaDesc = document.querySelector('meta[name="description"]');
    if (metaDesc && pageData.metaDescription) {
      metaDesc.setAttribute('content', pageData.metaDescription);
    }

    const canonical = document.querySelector('link[rel="canonical"]');
    if (canonical && pageData.canonical) {
      canonical.setAttribute('href', pageData.canonical);
    }
  }

  function applyTranslations(page, lang) {
    const pageData = translations[page]?.[lang];
    if (!pageData) return;

    updateMeta(page, lang);
    localStorage.setItem('preferredLanguage', lang);

    const toggle = document.getElementById('langToggle');
    if (toggle) {
      toggle.textContent = pageData.toggleText;
      toggle.setAttribute('aria-label', pageData.toggleLabel);
      toggle.setAttribute('title', pageData.toggleLabel);
    }

    const texts = pageData.text || {};
    Object.entries(texts).forEach(([id, value]) => {
      const el = document.getElementById(id);
      if (!el) return;

      const content = value.includes('\n') ? value.split('\n').join('<br>') : value;
      el.innerHTML = content;
    });

    const links = pageData.links || {};
    Object.entries(links).forEach(([id, value]) => {
      const el = document.getElementById(id);
      if (el) el.textContent = value;
    });
  }

  document.addEventListener('DOMContentLoaded', () => {
    const page = document.body.dataset.page;
    if (!page || !translations[page]) return;

    const initialLang = detectLanguage();
    applyTranslations(page, initialLang);

    const toggle = document.getElementById('langToggle');
    if (toggle) {
      toggle.addEventListener('click', () => {
        const newLang = (document.documentElement.lang === 'es') ? 'en' : 'es';
        applyTranslations(page, newLang);
      });
    }
  });
})();
